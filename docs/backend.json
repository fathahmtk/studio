{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The user's unique ID."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        }
      },
      "required": ["id"]
    },
    "Ingredient": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Ingredient",
      "type": "object",
      "description": "Represents an ingredient used in recipes.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Ingredient entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the ingredient."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the ingredient."
        },
        "purchaseCost": {
          "type": "number",
          "description": "Cost of purchasing the ingredient."
        },
        "unitMeasurement": {
          "type": "string",
          "description": "Unit of measurement for the ingredient (e.g., kg, lb, oz)."
        },
        "supplierId": {
          "type": "string",
          "description": "Reference to Supplier. (Relationship: Supplier 1:N Ingredient)"
        },
        "stock": {
            "type": "number",
            "description": "Current stock quantity of the ingredient."
        }
      },
      "required": [
        "id",
        "name",
        "purchaseCost",
        "unitMeasurement",
        "supplierId"
      ]
    },
    "Supplier": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Supplier",
      "type": "object",
      "description": "Represents a supplier of ingredients.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Supplier entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the supplier."
        },
        "contactInformation": {
          "type": "string",
          "description": "Contact details for the supplier."
        }
      },
      "required": [
        "id",
        "name",
        "contactInformation"
      ]
    },
    "Recipe": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Recipe",
      "type": "object",
      "description": "Represents a menu recipe.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Recipe entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the recipe."
        },
        "description": {
          "type": "string",
          "description": "Description of the recipe and preparation instructions."
        },
        "portionSize": {
          "type": "string",
          "description": "The portion size of the recipe."
        },
         "laborCost": {
          "type": "number",
          "description": "Labor cost associated with preparing the recipe."
        },
        "overheadCost": {
          "type": "number",
          "description": "Overhead costs associated with the recipe."
        },
        "imageUrl": {
            "type": "string",
            "description": "URL for the recipe's display image."
        },
        "imageHint": {
            "type": "string",
            "description": "A hint for AI to generate a relevant image."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "laborCost",
        "overheadCost"
      ]
    },
    "RecipeIngredient": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "RecipeIngredient",
      "type": "object",
      "description": "Represents the ingredients required for a recipe and their quantities. (Relationship: Recipe 1:N RecipeIngredient, Ingredient 1:N RecipeIngredient)",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the RecipeIngredient entity."
        },
        "recipeId": {
          "type": "string",
          "description": "Reference to Recipe. (Relationship: Recipe 1:N RecipeIngredient)"
        },
        "ingredientId": {
          "type": "string",
          "description": "Reference to Ingredient. (Relationship: Ingredient 1:N RecipeIngredient)"
        },
        "quantity": {
          "type": "number",
          "description": "Quantity of the ingredient required for the recipe."
        }
      },
      "required": [
        "id",
        "recipeId",
        "ingredientId",
        "quantity"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
            "entityName": "UserProfile",
            "schema": {
                "$ref": "#/backend/entities/UserProfile"
            },
            "description": "Stores user profile information. The document ID is the user's UID."
        }
      },
      {
        "path": "/suppliers/{supplierId}",
        "definition": {
          "entityName": "Supplier",
          "schema": {
            "$ref": "#/backend/entities/Supplier"
          },
          "description": "Stores supplier information. Includes supplier ID in the document ID."
        }
      },
      {
        "path": "/suppliers/{supplierId}/ingredients/{ingredientId}",
        "definition": {
          "entityName": "Ingredient",
          "schema": {
            "$ref": "#/backend/entities/Ingredient"
          },
          "description": "Stores ingredients associated with each supplier.  'supplierId' is used to nest the ingredients and is included in the document ID."
        }
      },
      {
        "path": "/recipes/{recipeId}",
        "definition": {
          "entityName": "Recipe",
          "schema": {
            "$ref": "#/backend/entities/Recipe"
          },
          "description": "Stores recipe information. 'recipeId' is included in the document ID."
        }
      },
      {
        "path": "/recipes/{recipeId}/recipeIngredients/{recipeIngredientId}",
        "definition": {
          "entityName": "RecipeIngredient",
          "schema": {
            "$ref": "#/backend/entities/RecipeIngredient"
          },
          "description": "Stores the ingredients required for each recipe. 'recipeId' is used to nest the ingredients. The document id includes 'recipeIngredientId'."
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support the 'Culinary Cost Manager' application. The structure has been updated to remove the MenuCostAnalysis collection as its fields can be denormalized directly into the Recipe documents. A UserProfile entity has been added for future user management. The core entities remain: `Ingredient`, `Supplier`, `Recipe`, and `RecipeIngredient`. The structure continues to leverage path-based ownership for private user data and denormalizes authorization data where necessary to avoid complex security rules and `get()` calls, ensuring scalability and performance."
  }
}
